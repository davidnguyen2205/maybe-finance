{
  "name": "Maybe Finance",
  "dockerComposeFile": "docker-compose.yml",
  "service": "app",
  "workspaceFolder": "/workspace",
  "containerUser": "vscode",
  "containerEnv": {
    "GITHUB_TOKEN": "${localEnv:GITHUB_TOKEN}",
    "GITHUB_USER": "${localEnv:GITHUB_USER}",
    "TZ": "${localEnv:TZ:UTC}"
  },
  "remoteEnv": {
    "PATH": "/workspace/bin:${containerEnv:PATH}",
    "BUNDLE_PATH": "/bundle",
    "GEM_HOME": "/usr/local/lib/ruby/gems/3.4.0",
    "GEM_PATH": "/usr/local/lib/ruby/gems/3.4.0"
  },
  "features": {
    "ghcr.io/devcontainers/features/git:1": {
      "ppa": true,
      "version": "latest"
    },
    "ghcr.io/devcontainers/features/github-cli:1": {
      "installDirectlyFromGitHubRelease": true,
      "version": "latest"
    },
    "ghcr.io/devcontainers/features/docker-in-docker:2": {
      "moby": true,
      "azureDnsAutoDetection": true,
      "installDockerBuildx": true,
      "version": "latest"
    }
  },
  "onCreateCommand": {
    "setup-git": "git config --global --add safe.directory /workspace"
  },
  "postCreateCommand": {
    "install-deps": "bundle install && npm install",
    "setup-db": "bin/rails db:prepare || echo 'Database setup will be completed on first run'"
  },
  "postStartCommand": "echo 'Welcome to Maybe Finance development environment! Run `bin/dev` to start the application.'",
  "customizations": {
    "vscode": {
      "extensions": [
        // Ruby & Rails extensions
        "Shopify.ruby-lsp",
        "kaiwood.endwise",
        "castwide.solargraph",
        "rebornix.ruby",
        "koichisasada.vscode-rdbg",
        
        // JavaScript/CSS/HTML extensions  
        "biomejs.biome",
        "bradlc.vscode-tailwindcss",
        "formulahendry.auto-rename-tag",
        "ms-vscode.vscode-json",
        
        // Database extensions
        "ms-ossdata.vscode-postgresql",
        "ckolkman.vscode-postgres",
        
        // General development extensions
        "EditorConfig.EditorConfig",
        "eamodio.gitlens",
        "ms-vscode.vscode-git",
        "GitHub.vscode-github-actions",
        "redhat.vscode-yaml",
        "ms-vscode-remote.remote-containers",
        "ms-vsliveshare.vsliveshare",
        
        // Testing and debugging
        "ms-vscode.test-adapter-converter",
        "hbenl.vscode-test-explorer",
        
        // Productivity extensions
        "streetsidesoftware.code-spell-checker",
        "ms-vscode.vscode-todo-highlight",
        "aaron-bond.better-comments",
        "alefragnani.Bookmarks"
      ],
      "settings": {
        "editor.formatOnSave": true,
        "editor.codeActionsOnSave": {
          "source.fixAll": "explicit",
          "source.organizeImports": "explicit"
        },
        "editor.defaultFormatter": "biomejs.biome",
        "[ruby]": {
          "editor.defaultFormatter": "Shopify.ruby-lsp",
          "editor.formatOnSave": true,
          "editor.tabSize": 2,
          "editor.insertSpaces": true,
          "editor.rulers": [120]
        },
        "[erb]": {
          "editor.defaultFormatter": "Shopify.ruby-lsp",
          "editor.formatOnSave": true
        },
        "[javascript]": {
          "editor.defaultFormatter": "biomejs.biome"
        },
        "[json]": {
          "editor.defaultFormatter": "biomejs.biome"
        },
        "ruby.intellisense": "rubyLsp",
        "ruby.useBundler": true,
        "ruby.useLanguageServer": true,
        "ruby.lint": {
          "rubocop": {
            "useBundler": true
          }
        },
        "ruby.format": "rubocop",
        "rubyLsp.enabledFeatures": {
          "codeActions": true,
          "diagnostics": true,
          "documentHighlights": true,
          "documentLink": true,
          "documentSymbols": true,
          "foldingRanges": true,
          "formatting": true,
          "hover": true,
          "inlayHint": true,
          "onTypeFormatting": true,
          "selectionRanges": true,
          "semanticHighlighting": true,
          "completion": true,
          "codeLens": true,
          "definition": true,
          "workspaceSymbol": true,
          "signatureHelp": true,
          "typeHierarchy": true
        },
        "files.exclude": {
          "**/.git": true,
          "**/.DS_Store": true,
          "**/node_modules": true,
          "**/tmp": true,
          "**/log": true,
          "**/.bundle": true,
          "**/coverage": true
        },
        "search.exclude": {
          "**/node_modules": true,
          "**/tmp": true,
          "**/log": true,
          "**/.bundle": true,
          "**/coverage": true,
          "**/vendor/bundle": true
        },
        "terminal.integrated.defaultProfile.linux": "zsh",
        "terminal.integrated.profiles.linux": {
          "zsh": {
            "path": "/bin/zsh"
          }
        }
      }
    }
  },
  "forwardPorts": [3000, 5432, 6379],
  "portsAttributes": {
    "3000": {
      "label": "Rails Server",
      "onAutoForward": "notify"
    },
    "5432": {
      "label": "PostgreSQL",
      "onAutoForward": "silent"
    },
    "6379": {
      "label": "Redis",
      "onAutoForward": "silent"
    }
  }
}